<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>My App</title>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
    <script src="./firebaseconfig.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth__ja.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.1.0/firebase-ui-auth.css" />
    <script src="./auth.js"></script>
  </head>
  <body>
    <div>List</div>
    <div id="firebaseui-auth-container"></div><br>
    <p><a href="/debug/new.html">newページへ</a></p>
    <ul id="list-container"></ul>
    <script type="module">
      const response = await fetch("http://localhost:8080/", {
        method: "GET",
      });
      const info = await response.json();
      const parent = document.getElementById('list-container');
      for (const f of info.files) {
        const child = document.createElement("li");
        child.textContent = f.title + " : " + f.id;
        child.addEventListener('click', (_) => {
          location.href = "/debug/id.html?id="+f.id;
        });
        parent.appendChild(child);
      }
    </script>
  </body>
</html>
